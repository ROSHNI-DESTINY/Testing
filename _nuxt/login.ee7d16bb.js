import{f as b,G as v,a1 as y,J as S,Q as C,ai as L,i as N,t as n,q as c,j as e,A as h,u as O,a4 as D,a5 as F,z as d,a9 as k,k as u,D as g,F as R,R as T,N as B,o as J,B as q,T as E}from"./entry.e849d55d.js";import"./userDashboard.56ed62d5.js";import{_ as V}from"./logo.bbc6aa26.js";const A={data(){return{themeCss:"/demo2.css",form:{email:"",passowrd:""},selected:{email:!1,password:!1},errorform:{},cartFlag:!1,wishFlag:!1,is_cartData:!1,is_wishData:!1}},computed:{...v(y,{cartItemsData:"data"}),...v(S,{wishItemsData:"data"})},watch:{cartFlag:function(){if(this.is_cartData){if(this.is_wishData)return!0;this.cartFlag&&this.pageRedirect()}},wishFlag:function(){this.is_cartData?(console.log(this.wishFlag,this.cartFlag),this.wishFlag&&this.cartFlag&&this.pageRedirect()):this.wishFlag&&this.pageRedirect()}},methods:{select(s){this.selected[s]=!0},handleFocusOut(s){s==="contact"&&this.successMessage==""&&(this.selected.anotherInput=this.auth.contact!=="",this.selected.anotherInput&&this.sendOtp(),this.selected.contact=!1)},attemptLogin(){(this.form.email||this.form.password)&&this.login()},async login(){const s=await C("login",this.form);s.error?this.errorform=s.errors:s.success&&(localStorage.setItem("user-data",JSON.stringify(s.data.user)),localStorage.setItem("token",s.data.token),localStorage.getItem("cart-product")!=null&&(localStorage.getItem("wish-product")!=null&&(this.is_wishData=!0),this.cartFlag=await this.storeDatatoCart(),this.is_cartData=!0),localStorage.getItem("wish-product")!=null&&(await this.storeDatatoWish(),this.is_wishData=!0),!this.is_cartData&&!this.is_wishData&&this.pageRedirect())},async checkAuth(){(await L("check_auth")).success&&(window.location.href="/")},async storeDatatoCart(){if(localStorage.getItem("cart-product")!=null){const s=localStorage.getItem("cart-product"),t=JSON.parse(s);t.length>0&&t.forEach((r,l)=>{let i={productid:r.productid,quantity:r.quantity,price:r.price,flag:"addToCart",guest:!0,image:JSON.parse(r.productid.work_images)!=null?JSON.parse(r.productid.work_images)[0].path:"/images/image-not-found.png"};y().addToCart(i).then(()=>{l===t.length-1&&(this.cartFlag=!0,localStorage.removeItem("cart-product"))})})}},async storeDatatoWish(){if(localStorage.getItem("wish-product")!=null){const s=localStorage.getItem("wish-product"),t=JSON.parse(s);t.length>0&&t.forEach((r,l)=>{let i={productid:r.productid,flag:!1,add:!0,image:r.image,guest:!0};S().addToWishList(i).then(()=>{l===t.length-1&&(this.wishFlag=!0,localStorage.removeItem("wish-product"))})})}},async pageRedirect(){window.location.href="/"}},mounted(){this.$refs.login_btn.addEventListener("keydown",t=>{t.keyCode===13&&this.login()})},beforeMount(){this.checkAuth()}},M={class:"login-section"},W={class:"materialContainer"},j={class:"box"},H={class:"brand-logo"},K=e("img",{src:V,class:"img-fluid",alt:"logo"},null,-1),z={class:"login-title"},U={class:"row",ref:"login_btn"},G={class:"col-md-12"},P={class:"input"},Q=e("label",{for:"email",style:u([{"line-height":"18px"}])},"Email Address",-1),X={class:"text-danger mt-2"},Y={class:"col-md-12"},Z={class:"input"},$=e("label",{for:"pass",style:u([{"line-height":"18px"}])},"Password",-1),tt={class:"text-danger mt-2"},et={class:"button login"},st=e("span",null,"Log In",-1),at=[st];function ot(s,t,r,l,i,o){var m,f,_,w;const I=E,x=T,p=B;return J(),N(R,null,[n(x,null,{default:c(()=>[n(I,null,{default:c(()=>[g("Login")]),_:1})]),_:1}),e("div",M,[e("div",W,[e("div",j,[e("div",H,[n(p,{to:"/"},{default:c(()=>[K]),_:1})]),e("div",z,[e("h2",null,h(O(q)().public.const.LogIn),1)]),e("div",U,[e("div",G,[e("div",P,[Q,D(e("input",{type:"email",name:"email",id:"email",autofocus:"","onUpdate:modelValue":t[0]||(t[0]=a=>i.form.email=a),onFocus:t[1]||(t[1]=d(a=>o.select("email"),["prevent"])),onBlur:t[2]||(t[2]=a=>o.handleFocusOut("email")),onKeyup:t[3]||(t[3]=k((...a)=>o.attemptLogin&&o.attemptLogin(...a),["enter"]))},null,544),[[F,i.form.email]]),e("span",{class:"spin",style:u([{width:i.selected.email?"100%":"0%"}])},null,4)]),e("span",X,h((f=(m=i.errorform)==null?void 0:m.email)==null?void 0:f[0]),1)]),e("div",Y,[e("div",Z,[$,D(e("input",{type:"password",name:"pass",id:"pass","onUpdate:modelValue":t[4]||(t[4]=a=>i.form.password=a),onFocus:t[5]||(t[5]=d(a=>o.select("password"),["prevent"])),onBlur:t[6]||(t[6]=a=>o.handleFocusOut("password")),onKeyup:t[7]||(t[7]=k((...a)=>o.attemptLogin&&o.attemptLogin(...a),["enter"]))},null,544),[[F,i.form.password]]),e("span",{class:"spin",style:u([{width:i.selected.password?"100%":"0%"}])},null,4)]),e("span",tt,h((w=(_=i.errorform)==null?void 0:_.password)==null?void 0:w[0]),1)])],512),e("a",{href:"javascript:void(0)",onClick:t[8]||(t[8]=d(a=>s.$router.push("/page/forgot_password"),["prevent"])),class:"pass-forgot text-center"},"Forgot your password?"),e("div",et,[e("button",{href:"javascript:void(0)",onClick:t[9]||(t[9]=d((...a)=>o.login&&o.login(...a),["prevent"])),type:"submit"},at)]),e("p",null,[g(" Not a member? "),n(p,{to:"/register",class:"theme-color"},{default:c(()=>[g("Sign up now")]),_:1}),e("p",null,[e("span",{class:"theme-color back-to-home",onClick:t[10]||(t[10]=(...a)=>o.pageRedirect&&o.pageRedirect(...a))},"Back To Home")])])])])])],64)}const nt=b(A,[["render",ot]]);export{nt as default};
